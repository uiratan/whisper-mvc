---
phase: 07-documentation
plan: 01
type: execute
wave: 1
depends_on: []
files_modified: [README.md, docs/screenshots/]
autonomous: false

must_haves:
  truths:
    - "Developer reading README understands all input methods (file picker, drag-and-drop, browser recording)"
    - "Developer reading README understands all output options (copy plain text, copy with timestamps, export TXT, export SRT)"
    - "Developer reading README can set up local environment following instructions"
    - "Developer reading README understands deployment process via GitHub Actions"
    - "README screenshots show current UI state (v2.0 features visible)"
  artifacts:
    - path: "README.md"
      provides: "Complete project documentation"
      contains: "Features section listing all input/output methods"
      min_lines: 100
    - path: "README.md"
      provides: "Local setup instructions"
      contains: "Prerequisites, environment variables, run commands"
    - path: "README.md"
      provides: "Deployment documentation"
      contains: "GitHub Actions workflow explanation"
    - path: "docs/screenshots/"
      provides: "UI screenshots showing current features"
      contains: "At least 2-3 screenshots of main UI states"
  key_links:
    - from: "README.md"
      to: "docs/screenshots/"
      via: "Image references in markdown"
      pattern: "!\\[.*\\]\\(docs/screenshots/.*\\)"
    - from: "README.md"
      to: ".github/workflows/deploy.yml"
      via: "Documentation references deployment workflow"
      pattern: "GitHub Actions|deploy\\.yml|CI/CD"
---

<objective>
Update README to accurately document current system capabilities, setup instructions, and deployment process with visual screenshots.

Purpose: Enable developers to understand the application's full feature set, successfully set up local development environment, and understand the CI/CD deployment workflow.

Output: Comprehensive README.md with screenshots showcasing all v2.0 and v2.1 features.
</objective>

<execution_context>
@/home/uira/.claude/get-shit-done/workflows/execute-plan.md
@/home/uira/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/06-cicd-pipeline/06-01-SUMMARY.md

# Current application files
@src/app/page.tsx
@src/components/AudioUploader.tsx
@package.json
@.github/workflows/deploy.yml
</context>

<tasks>

<task type="checkpoint:human-action" gate="blocking">
  <name>Task 1: Capture UI Screenshots</name>

  <action>
  User needs to capture screenshots of the application showing current features. Claude cannot automate browser screenshots without headless browser tooling.
  </action>

  <instructions>
  1. **Start the application:**
     ```bash
     cd /home/uira/git/ai/whisper-test
     npm run dev
     ```

  2. **Open browser to http://localhost:3000**

  3. **Capture these screenshots** (save as PNG to `docs/screenshots/`):

     **Screenshot 1: Main Interface - Upload Tab** (`main-upload-interface.png`)
     - Show the clean upload interface with drag-and-drop zone
     - Capture the "Upload File" tab selected
     - Show the file picker area with instructions

     **Screenshot 2: Recording Interface** (`recording-interface.png`)
     - Switch to "Live Recording" tab
     - Show the microphone icon and recording controls
     - Capture before starting recording (idle state)

     **Screenshot 3: Transcription Results** (`transcription-results.png`)
     - Upload a short audio file (or use a recording)
     - Let transcription complete
     - Capture the full results view showing:
       - Audio player
       - Action buttons (Copy Text, Copy + Timestamps, Export TXT, Export SRT)
       - Full text section with clickable segments
       - Timestamped segments list below

  4. **Create directory and save screenshots:**
     ```bash
     mkdir -p docs/screenshots
     # Save screenshots to docs/screenshots/ with names above
     ```

  5. **Verify screenshots exist:**
     ```bash
     ls -lh docs/screenshots/
     ```

  Expected output: 3 PNG files in `docs/screenshots/` directory.
  </instructions>

  <verify>
  Check that 3 PNG files exist in docs/screenshots/ directory:
  ```bash
  ls -1 docs/screenshots/*.png 2>/dev/null | wc -l
  # Should return 3

  test -f docs/screenshots/main-upload-interface.png && echo "Upload screenshot exists"
  test -f docs/screenshots/recording-interface.png && echo "Recording screenshot exists"
  test -f docs/screenshots/transcription-results.png && echo "Results screenshot exists"
  ```
  </verify>

  <done>
  - Three PNG files exist in docs/screenshots/ directory
  - Screenshot 1 (main-upload-interface.png) shows upload interface with drag-and-drop zone
  - Screenshot 2 (recording-interface.png) shows live recording interface with controls
  - Screenshot 3 (transcription-results.png) shows complete transcription results with all output options visible
  - All screenshots are clear, properly sized, and show current v2.0+ UI features
  </done>

  <resume-signal>
  Reply with "screenshots captured" when files are saved to `docs/screenshots/` directory, or describe any issues encountered.
  </resume-signal>
</task>

<task type="auto">
  <name>Task 2: Update README with comprehensive documentation</name>

  <files>README.md</files>

  <action>
  Completely rewrite README.md to accurately reflect the current system (v2.0 features + v2.1 CI/CD pipeline).

  **Structure:**

  1. **Header**
     - Project title: "Whisper Test" (or current name from page.tsx)
     - Badges: Next.js, TypeScript, Tailwind CSS, Docker, License
     - Brief description emphasizing local AI transcription

  2. **Features Section** (DOCS-01)
     List ALL current capabilities:
     - **Input Methods:**
       - File picker (click to select)
       - Drag-and-drop (any audio format)
       - Browser recording (native microphone access with live waveform visualization)
     - **Processing:**
       - Automatic audio format conversion (WAV 16kHz mono via FFmpeg)
       - Local transcription using whisper.cpp (no external APIs)
       - Real-time progress feedback with phase indicators (upload → conversion → transcription)
     - **Output Options:**
       - Interactive transcription display with audio playback
       - Bidirectional synchronization (click segment to seek, playback highlights current segment)
       - Copy to clipboard (plain text or with timestamps)
       - Export to TXT (plain text file)
       - Export to SRT (subtitle format with timestamps)
     - **UX Features:**
       - Enhanced typography and visual polish
       - Mobile-responsive interface
       - Real-time waveform visualization during recording

  3. **Screenshots** (DOCS-04)
     Embed screenshots captured in Task 1:
     ```markdown
     ## Screenshots

     ### Main Interface
     ![Upload Interface](docs/screenshots/main-upload-interface.png)

     ### Live Recording
     ![Recording Interface](docs/screenshots/recording-interface.png)

     ### Transcription Results
     ![Transcription Results](docs/screenshots/transcription-results.png)
     ```

  4. **Quick Start Section** (DOCS-02 - Docker)
     Keep existing Docker quick start, verify commands are correct:
     - `docker build -t whisper-test .`
     - `docker run --rm -p 3000:3000 whisper-test`

  5. **Local Development Setup** (DOCS-02)
     **Prerequisites:**
     - Node.js 22+ (from package.json engines if present, otherwise current LTS)
     - FFmpeg installed and in PATH
     - whisper.cpp compiled binary (whisper-cli)

     **Setup steps:**
     ```bash
     # Clone and install
     git clone <repo-url>
     cd whisper-test
     npm install

     # Configure environment
     # Create .env.local:
     WHISPER_CPP_PATH="/path/to/whisper-cli"
     WHISPER_MODEL_PATH="/path/to/ggml-base.bin"

     # Run development server
     npm run dev
     ```

     Open http://localhost:3000

  6. **Deployment Section** (DOCS-03)
     Document the CI/CD pipeline from Phase 6:

     **GitHub Actions Deployment:**
     - Automated deployment to Fly.io triggered by git tags
     - Workflow file: `.github/workflows/deploy.yml`

     **Deployment Process:**
     ```bash
     # Create and push a version tag
     git tag v2.1.0
     git push origin v2.1.0
     ```

     - GitHub Actions automatically triggers
     - Builds Docker image on Fly.io remote builders (--remote-only)
     - Deploys to Fly.io
     - Runs health checks (30s wait + status check + HTTP verification)
     - Reports status via GitHub workflow checks

     **Prerequisites for deployment:**
     - Fly.io app created (`fly launch` or `fly apps create`)
     - `FLY_API_TOKEN` configured as GitHub repository secret (from `flyctl auth token`)

     **Monitoring:**
     - GitHub Actions: https://github.com/[username]/whisper-test/actions
     - Fly.io Dashboard: https://fly.io/apps/whisper-test
     - Live app: https://whisper-test.fly.dev/

  7. **Architecture Section**
     Keep existing architecture description, verify accuracy:
     - Frontend: Next.js App Router with React 19
     - API: Route handlers for file upload and processing
     - Processing pipeline: Upload → FFmpeg conversion (WAV 16kHz mono) → whisper.cpp → JSON parsing → cleanup

  8. **Tech Stack**
     Based on package.json:
     - Next.js 16
     - React 19
     - TypeScript 5
     - Tailwind CSS 4
     - fluent-ffmpeg
     - react-dropzone
     - whisper.cpp (external binary)

  9. **License and Credits**
     Keep existing ISC license and author attribution.

  **Key improvements from current README:**
  - Add browser recording feature (missing from current README)
  - Add drag-and-drop feature (missing)
  - Add export functionality (TXT/SRT) (missing)
  - Add interactive playback features (missing)
  - Document GitHub Actions CI/CD pipeline (new in v2.1)
  - Add screenshots showing actual UI
  - Update tech stack versions to match package.json
  </action>

  <verify>
  1. README.md exists and is updated
  2. Grep checks for key sections:
     ```bash
     grep -q "Live Recording\|Browser recording\|Browser Recording" README.md
     grep -q "Drag.*drop\|drag.*drop" README.md
     grep -q "Export.*SRT\|Export to SRT" README.md
     grep -q "GitHub Actions\|CI/CD" README.md
     grep -q "docs/screenshots/" README.md
     ```
  3. Verify screenshot references exist:
     ```bash
     grep -c "!\[.*\](docs/screenshots/" README.md
     # Should return 3 (three screenshot embeds)
     ```
  4. Word count check (should be substantially longer than current ~100 lines):
     ```bash
     wc -l README.md
     # Should be 150+ lines
     ```
  </verify>

  <done>
  - README.md comprehensively documents all v2.0 features (input methods, output options, processing)
  - README.md includes local development setup instructions with prerequisites and environment variables
  - README.md documents GitHub Actions deployment workflow with step-by-step process
  - README.md embeds 3 screenshots showing current UI states
  - All 4 DOCS requirements (DOCS-01, DOCS-02, DOCS-03, DOCS-04) are satisfied
  </done>
</task>

</tasks>

<verification>
**Overall phase verification:**

1. **Feature completeness check:**
   ```bash
   # All input methods documented
   grep -i "file picker\|click to select" README.md
   grep -i "drag.*drop" README.md
   grep -i "recording\|microphone" README.md

   # All output options documented
   grep -i "copy.*clipboard" README.md
   grep -i "export.*txt" README.md
   grep -i "export.*srt" README.md
   grep -i "interactive\|playback" README.md
   ```

2. **Setup documentation check:**
   ```bash
   # Prerequisites mentioned
   grep -i "node.js\|nodejs" README.md
   grep -i "ffmpeg" README.md
   grep -i "whisper" README.md

   # Environment variables documented
   grep -i "WHISPER_CPP_PATH\|WHISPER_MODEL_PATH" README.md
   ```

3. **Deployment documentation check:**
   ```bash
   # CI/CD pipeline documented
   grep -i "github actions" README.md
   grep -i "fly.io\|flyctl" README.md
   grep -i "git tag" README.md
   ```

4. **Screenshots check:**
   ```bash
   # Screenshots exist
   ls -1 docs/screenshots/*.png | wc -l
   # Should return 3

   # Screenshots referenced in README
   grep -c "!\[.*\](docs/screenshots/" README.md
   # Should return 3
   ```

5. **Requirements traceability:**
   - DOCS-01: Features section lists all input/output methods ✓
   - DOCS-02: Local development setup with prerequisites ✓
   - DOCS-03: Deployment process documented ✓
   - DOCS-04: Screenshots embedded ✓
</verification>

<success_criteria>
**Phase complete when:**

1. Three screenshots exist in `docs/screenshots/` directory showing:
   - Upload interface with drag-and-drop zone
   - Live recording interface with controls
   - Transcription results with all output options visible

2. README.md accurately documents:
   - All three input methods (file picker, drag-and-drop, browser recording)
   - All five output options (interactive playback, copy text, copy + timestamps, export TXT, export SRT)
   - Complete local development setup (prerequisites, environment variables, commands)
   - GitHub Actions deployment workflow (tag trigger, process, prerequisites)
   - Screenshots embedded via markdown image syntax

3. Developer can:
   - Understand full feature set by reading Features section
   - Set up local environment by following Setup section
   - Deploy to Fly.io by following Deployment section
   - See what the UI looks like from screenshots

4. All four DOCS requirements satisfied:
   - DOCS-01: ✓ Features listed
   - DOCS-02: ✓ Setup instructions complete
   - DOCS-03: ✓ Deployment process documented
   - DOCS-04: ✓ Screenshots included
</success_criteria>

<output>
After completion, create `.planning/phases/07-documentation/07-01-SUMMARY.md` following the standard summary template.
</output>
