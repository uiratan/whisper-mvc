---
phase: 03-drag-and-drop-integration
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - package.json
  - src/components/AudioUploader.tsx
autonomous: true

must_haves:
  truths:
    - "react-dropzone is installed"
    - "AudioUploader component uses react-dropzone for file selection"
    - "Visual feedback (overlay or style change) appears on drag over"
  artifacts:
    - path: "src/components/AudioUploader.tsx"
      provides: "Drag-and-drop interface"
      contains: "useDropzone"
---

<objective>
Integrate react-dropzone into the AudioUploader component to provide a modern drag-and-drop file selection experience.

Purpose: Improve user experience by allowing direct file dragging into the UI.
Output: Enhanced AudioUploader with drag-and-drop support and visual feedback.
</objective>

<execution_context>
@/home/uira/.gemini/get-shit-done/workflows/execute-plan.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/REQUIREMENTS.md
</context>

<tasks>

<task type="auto">
  <name>Install react-dropzone</name>
  <files>
    package.json
  </files>
  <action>
Install the `react-dropzone` package.
```bash
npm install react-dropzone
```
  </action>
  <verify>
Check package.json to ensure react-dropzone is listed in dependencies.
  </verify>
  <done>
- react-dropzone installed and added to package.json
  </done>
</task>

<task type="auto">
  <name>Integrate react-dropzone into AudioUploader.tsx</name>
  <files>
    src/components/AudioUploader.tsx
  </files>
  <action>
Refactor `AudioUploader.tsx` to use `useDropzone` from `react-dropzone`.

1. Import `useDropzone`.
2. Configure `useDropzone` with:
   - `onDrop` callback that handles file selection (replacing/using `handleFileSelect` logic).
   - `accept` option for audio files (matching current validation).
   - `maxSize` (25MB).
   - `multiple: false`.
3. Wrap the upload area with the dropzone container.
4. Use `isDragActive` to provide visual feedback (e.g., change border color, background, or show an overlay).
5. Ensure error messages for invalid files (type/size) are still displayed correctly using `fileRejections`.
  </action>
  <verify>
Manual test:
- Drag an audio file over the component and verify visual state change.
- Drop the file and verify it is selected and its details are displayed.
- Drag an invalid file (e.g., a text file) and verify it is rejected with an error message.
- Click the area to ensure traditional file picker still works.
  </verify>
  <done>
- useDropzone integrated into AudioUploader
- Drag-over visual feedback implemented
- File validation (type, size) preserved and integrated with dropzone rejections
- Traditional click-to-select functionality preserved
  </done>
</task>

</tasks>

<verification>
After completing all tasks:

1. Development server runs without errors: `npm run dev`
2. TypeScript compilation succeeds: `npx tsc --noEmit`
3. Dragging an audio file over the upload area triggers visual feedback.
4. Dropping an audio file selects it successfully.
5. Dropping an invalid file (too large or wrong type) shows an error message.
6. The "Upload File" button works as before after a file is dropped.
</verification>

<success_criteria>
1. User can drag a file over the upload area and see a visual state change.
2. Dropping a valid audio file selects it exactly like the file picker.
3. Invalid files are rejected with a clear error message.
</success_criteria>

<output>
After completion, create `.planning/phases/03-drag-and-drop-integration/03-01-SUMMARY.md`
</output>
